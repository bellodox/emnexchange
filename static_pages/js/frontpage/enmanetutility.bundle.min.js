function enableAntiXssAjaxPosts(){$.ajaxPrefilter(function(n){var t,i;if(n.type.toUpperCase()==="POST"){if(t=$("input[name^=__RequestVerificationToken]").first(),!t.length)return;i=t.attr("name");n.contentType.indexOf("application/json")===0?n.url+=(n.url.indexOf("?")===-1?"?":"&")+t.serialize():typeof n.data=="string"&&n.data.indexOf(i)===-1&&(n.data+=(n.data?"&":"")+t.serialize())}})}ko.bindingHandlers.showModal={init:function(n,t){$(n).modal({backdrop:"static",keyboard:!0,show:!1});$(n).on("keydown",function(n){n=n||window.event;var i=t();(n.keyCode===27||n.key==="Escape")&&i(!1)})},update:function(n,t){var i=t();ko.utils.unwrapObservable(i)?($(n).modal("show"),$("input",n).focus()):$(n).modal("hide")}};ko.bindingHandlers.highlight={update:function(n,t){ko.toJS(t());var i=parseInt($(n).html(),10),r=parseInt(t()(),10);$(n).data("ko_init")?r<i?$(n).effect("highlight",{color:"#AA0000"},1e3):r>i&&$(n).effect("highlight",{color:"#00AA00"},1e3):$(n).data("ko_init",!0)}};ko.bindingHandlers.datepicker={init:function(n,t){$(n).datetimepicker({format:"MM/DD/YYYY"});$(n).on("dp.change",function(n){var i=t();i(n.date)})},update:function(n,t){var i=ko.utils.unwrapObservable(t()),r;i&&(r=new moment(i),$(n).data("DateTimePicker").date(r))}};ko.bindingHandlers.timer={update:function(n){var t=$(n).text(),i=setInterval(function(){$(n).text(--t);t==0&&clearInterval(i)},1e3)}};ko.subscribable.fn.subscribeChanged=function(n){var t;this.subscribe(function(n){t=n},this,"beforeChange");this.subscribe(function(i){n(i,t)})};ko.extenders.calculateDelta=function(n){return n.absoluteChange=ko.observable(),n.percentChange=ko.observable(),n.subscribeChanged(function(t,i){n.percentChange(t&&i?(t-i)/i*100:0);n.absoluteChange(t&&i?t-i:0)}),n};ko.extenders.numeric=function(n,t){var i=ko.pureComputed({read:n,write:function(i){var u=n(),f=Math.pow(10,t),e=isNaN(i)?0:parseFloat(+i),r=Math.round(e*f)/f;r!==u?n(r):i!==u&&n.notifySubscribers(r)}}).extend({notify:"always"});return i(n()),i};ko.extenders.date=function(n){n(new moment);n.month=ko.observable().extend({required:!0,min:0,max:11});n.date=ko.observable().extend({required:!0,min:1,max:31});n.year=ko.observable().extend({required:!0,min:1900,max:2016});n.month.subscribe(function(){n.month(n.month())});n.date.subscribe(function(){n.date(n.date())});n.year.subscribe(function(){n.year(n.year())});return ko.computed({read:n,write:function(t){var i=new moment(t);n.month(i.month());n.date(i.date());n.year(i.year())}})};ko.observableArray.fn.indexed=function(n){var t=this;return n=n||"id",this.index=ko.computed(function(){for(var f,r,e=t(),o={},i=0,u=e.length;i<u;i++)f=e[i],r=ko.unwrap(f[n]),(r||r===0)&&(o[r]=i);return o}),this.contains=function(i){var u=ko.unwrap(i[n]),r=t.index()[u];return!!(r||r===0)},this.toggleItem=function(i){var r=ko.unwrap(i[n]),u=t.index()[r];u||u===0?t.splice(u,1):(r||r===0)&&t.push(i)},this.addOrUpdate=function(i){var u=ko.unwrap(i[n]),r=t.index()[u];r||r==0?t.splice(r,1,i):t.push(i)},this},function(){var n=[].indexOf||function(n){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===n)return t;return-1};window.DataTable=function(){function i(n,t){var i;if(t||(n instanceof Array?t={}:(t=n,n=[])),this.options={recordWord:t.recordWord||"record",recordWordPlural:t.recordWordPlural,sortDir:t.sortDir||"asc",sortField:t.sortField||void 0,perPage:t.perPage||15,filterFn:t.filterFn||void 0,unsortedClass:t.unsortedClass||"",descSortClass:t.descSortClass||"",ascSortClass:t.ascSortClass||""},this.initObservables(),(i=t.serverSidePagination)&&i.enabled){if(!(i.path&&i.loader))throw new Error("`path` or `loader` missing from `serverSidePagination` object");this.options.paginationPath=i.path;this.options.resultHandlerFn=i.loader;this.initWithServerSidePagination()}else this.initWithClientSidePagination(n)}var r,t;return t=ko.pureComputed||ko.computed,r=function(n,t){return t==null?n==null:n!=null?typeof n=="boolean"?n===t:n.toString().toLowerCase().indexOf(t.toString().toLowerCase())>=0||n===t:!1},i.prototype.initObservables=function(){return this.sortDir=ko.observable(this.options.sortDir),this.sortField=ko.observable(this.options.sortField),this.perPage=ko.observable(this.options.perPage),this.currentPage=ko.observable(1),this.filter=ko.observable(""),this.loading=ko.observable(!1),this.rows=ko.observableArray([])},i.prototype.initWithClientSidePagination=function(i){var u;return this.filtering=ko.observable(!1),this.forceFilter=ko.observable(!1),this.filter.subscribe(function(n){return function(){return n.currentPage(1)}}(this)),this.perPage.subscribe(function(n){return function(){return n.currentPage(1)}}(this)),this.rows(i),this.rowAttributeMap=t(function(n){return function(){var r,t,u;if(i=n.rows(),r={},i.length>0){u=i[0];for(t in u)u.hasOwnProperty(t)&&(r[t.toLowerCase()]=t)}return r}}(this)),this.filteredRows=t(function(n){return function(){var t,r;return n.filtering(!0),t=n.filter(),i=n.rows.slice(0),(n.forceFilter()||t!=null&&t!=="")&&(r=n.filterFn(t),i=i.filter(r)),n.sortField()!=null&&n.sortField()!==""?i.sort(function(t,i){var r,u;return r=ko.utils.unwrapObservable(t[n.sortField()]),u=ko.utils.unwrapObservable(i[n.sortField()]),typeof r=="string"&&(r=r.toLowerCase()),typeof u=="string"&&(u=u.toLowerCase()),n.sortDir()==="asc"?r<u||r===""||r==null?-1:r>u||u===""||u==null?1:0:r<u||r===""||r==null?1:r>u||u===""||u==null?-1:0}):i,n.filtering(!1),i}}(this)).extend({rateLimit:50,method:"notifyWhenChangesStop"}),this.pagedRows=t(function(n){return function(){var t,i;return t=n.currentPage()-1,i=n.perPage(),n.filteredRows().slice(t*i,(t+1)*i)}}(this)),this.pages=t(function(n){return function(){return Math.ceil(n.filteredRows().length/n.perPage())}}(this)),this.leftPagerClass=t(function(n){return function(){if(n.currentPage()===1)return"disabled"}}(this)),this.rightPagerClass=t(function(n){return function(){if(n.currentPage()===n.pages())return"disabled"}}(this)),this.total=t(function(n){return function(){return n.filteredRows().length}}(this)),this.from=t(function(n){return function(){return(n.currentPage()-1)*n.perPage()+1}}(this)),this.to=t(function(n){return function(){var t;return t=n.currentPage()*n.perPage(),t>n.total()?n.total():t}}(this)),this.recordsText=t(function(n){return function(){var u,f,i,r,e,t;return f=n.pages(),t=n.total(),u=n.from(),e=n.to(),i=n.options.recordWord,r=n.options.recordWordPlural||i+"s",f>1?u+" to "+e+" of "+t+" "+r:t+" "+(t>1||t===0?r:i)}}(this)),this.showNoData=t(function(n){return function(){return n.pagedRows().length===0&&!n.loading()}}(this)),this.showLoading=t(function(n){return function(){return n.loading()}}(this)),this.sortClass=function(n){return function(i){return t(function(){return n.sortField()===i?"sorted "+(n.sortDir()==="asc"?n.options.ascSortClass:n.options.descSortClass):n.options.unsortedClass})}}(this),this.addRecord=function(n){return function(t){return n.rows.push(t)}}(this),this.removeRecord=function(n){return function(t){return n.rows.remove(t),n.pagedRows().length===0?n.prevPage():void 0}}(this),this.replaceRows=function(n){return function(t){return n.rows(t),n.currentPage(1),n.filter(void 0)}}(this),u=function(n,t,i){var u,f;return function(){var n=[];for(u in i)f=i[u],n.push(f);return n}().some(function(i){return r(ko.isObservable(t[i])?t[i]():t[i],n)})},this.filterFn=this.options.filterFn||function(t){return function(i){var f,s,o,e;return s=i==null?"":i,o=[[],{}],f=o[0],e=o[1],s.split(" ").forEach(function(n){var t;return n.indexOf(":")>=0?(t=n.split(":"),e[t[0]]=function(){switch(t[1].toLowerCase()){case"yes":case"true":return!0;case"no":case"false":return!1;case"blank":case"none":case"null":case"undefined":return void 0;default:return t[1].toLowerCase()}}()):f.push(n)}),f=f.join(" "),function(i){var s,o,h;return s=function(){var n=[];for(o in e)h=e[o],n.push(function(n){return function(t,u){var f;return(f=n.rowAttributeMap()[t.toLowerCase()])?r(ko.isObservable(i[f])?i[f]():i[f],u):!1}}(this)(o,h));return n}.call(t),n.call(s,!1)<0&&(i.match!=null?i.match(f):u(f,i,t.rowAttributeMap()))}}}(this)},i.prototype.initWithServerSidePagination=function(){var n,i;return i=function(n){return function(t,i){var u,r,f,e;return f=n.options.paginationPath+"?"+function(){var n=[];for(u in t)e=t[u],n.push(encodeURIComponent(u)+"="+encodeURIComponent(e));return n}().join("&"),r=new XMLHttpRequest,r.open("GET",f,!0),r.setRequestHeader("Content-Type","application/json"),r.onload=function(){return r.status>=200&&r.status<400?i(null,JSON.parse(r.responseText)):i(new Error("Error communicating with server"))},r.onerror=function(){return i(new Error("Error communicating with server"))},r.send()}}(this),n=function(n,t,i,r,u){var f;return f={perPage:n,page:t},i!=null&&i!==""&&(f.filter=i),r!=null&&r!==""&&u!=null&&u!==""&&(f.sortDir=r,f.sortBy=u),f},this.filtering=ko.observable(!1),this.pagedRows=ko.observableArray([]),this.numFilteredRows=ko.observable(0),this.filter.subscribe(function(n){return function(){return n.currentPage(1)}}(this)),this.perPage.subscribe(function(n){return function(){return n.currentPage(1)}}(this)),ko.computed(function(t){return function(){var r;return t.loading(!0),t.filtering(!0),r=n(t.perPage(),t.currentPage(),t.filter(),t.sortDir(),t.sortField()),i(r,function(n,i){var r,u;return(t.loading(!1),t.filtering(!1),n)?console.log(n):(u=i.total,r=i.results,t.numFilteredRows(u),t.pagedRows(r.map(t.options.resultHandlerFn)))})}}(this)).extend({rateLimit:500,method:"notifyWhenChangesStop"}),this.pages=t(function(n){return function(){return Math.ceil(n.numFilteredRows()/n.perPage())}}(this)),this.leftPagerClass=t(function(n){return function(){if(n.currentPage()===1)return"disabled"}}(this)),this.rightPagerClass=t(function(n){return function(){if(n.currentPage()===n.pages())return"disabled"}}(this)),this.from=t(function(n){return function(){return(n.currentPage()-1)*n.perPage()+1}}(this)),this.to=t(function(n){return function(){var t,i;return t=n.currentPage()*n.perPage(),t>(i=n.numFilteredRows())?i:t}}(this)),this.recordsText=t(function(n){return function(){var u,f,i,r,e,t;return f=n.pages(),t=n.numFilteredRows(),u=n.from(),e=n.to(),i=n.options.recordWord,r=n.options.recordWordPlural||i+"s",f>1?u+" to "+e+" of "+t+" "+r:t+" "+(t>1||t===0?r:i)}}(this)),this.showNoData=t(function(n){return function(){return n.pagedRows().length===0&&!n.loading()}}(this)),this.showLoading=t(function(n){return function(){return n.loading()}}(this)),this.sortClass=function(n){return function(i){return t(function(){return n.sortField()===i?"sorted "+(n.sortDir()==="asc"?n.options.ascSortClass:n.options.descSortClass):n.options.unsortedClass})}}(this),this.addRecord=function(){throw new Error("#addRecord() not applicable with serverSidePagination enabled");},this.removeRecord=function(){throw new Error("#removeRecord() not applicable with serverSidePagination enabled");},this.replaceRows=function(){throw new Error("#replaceRows() not applicable with serverSidePagination enabled");},this.refreshData=function(t){return function(){var r;return t.loading(!0),t.filtering(!0),r=n(t.perPage(),t.currentPage(),t.filter(),t.sortDir(),t.sortField()),i(r,function(n,i){var r,u;return(t.loading(!1),t.filtering(!1),n)?console.log(n):(u=i.total,r=i.results,t.numFilteredRows(u),t.pagedRows(r.map(t.options.resultHandlerFn)))})}}(this)},i.prototype.toggleSort=function(n){return function(t){return function(){return t.currentPage(1),t.sortField()===n?t.sortDir(t.sortDir()==="asc"?"desc":"asc"):(t.sortDir("asc"),t.sortField(n))}}(this)},i.prototype.prevPage=function(){var n;return n=this.currentPage(),n!==1?this.currentPage(n-1):void 0},i.prototype.nextPage=function(){var n;return n=this.currentPage(),n!==this.pages()?this.currentPage(n+1):void 0},i.prototype.gotoPage=function(n){return function(t){return function(){return t.currentPage(n)}}(this)},i.prototype.pageClass=function(n){return t(function(t){return function(){if(t.currentPage()===n)return"active"}}(this))},i}()}.call(this);
/*!
 * jTableScroll
 * http://mikeallisononline.com/
 *
 * Dependent on jquery
 * http://jquery.com/
 *
 * Copyright 2013 Mike Allison
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 */
(function(n){n.fn.jTableScroll=function(t){var r,i,f;t=n.extend({width:null,height:null,backgroundcolor:null,headerCss:null,reactive:!0},t||{});r=n("<div>").css({visibility:"hidden",width:"50px",height:"50px",overflow:"scroll"}).appendTo("body");i=50-n("<div>").height(99).appendTo(r).outerWidth();r.remove();var u=-1,e=navigator.userAgent,o=new RegExp("Trident/([0-9]{1,}[.0-9]{0,})");o.exec(e)!=null&&(u=parseFloat(RegExp.$1));f=u==4;this.each(function(){var r=n(this),y=r.parent(),b=y.width(),a=parseInt(t.width?t.width:y.width()),v=parseInt(t.height?t.height:y.height()),k,h,u,c,l,e,o,s,d,w,p;r.width()<=a&&r.height()<=v||(k=r.width(),r.width(k),h=n(document.createElement("div")),h.css({overflow:"hidden"}).width(a).height(v),u=n(document.createElement("div")),u.css({overflow:"hidden",position:"relative"}).width(a),t.headerCss&&u.addClass(t.headerCss),c=r.clone(),c.find("tbody").remove(),c.find("tfoot").remove(),l=r.clone(),l.find("tbody").remove(),l.find("thead").remove(),e=null,r.find("thead").find("th").each(function(i,r){var u=n(r),f=u.width();e==null&&(e=t.backgroundcolor==null?u.bkgcolor():t.backgroundcolor);(e=="rgba(0, 0, 0, 0)"||e=="transparent")&&(e="#fff");u.css("width",f+"px");n(c.find("th")[i]).click(function(){u.click()});n(c.find("th")[i]).width(f);n(l.find("th")[i]).click(function(){u.click()});n(l.find("td")[i]).width(f)}),o=n(document.createElement("div")),o.css({overflow:"hidden",position:"relative","background-color":e}).width(a),c.css({"table-layout":"fixed","background-color":e}),l.css({"table-layout":"fixed","background-color":e}),r.css({"table-layout":"fixed"}),s=n(document.createElement("div")),s.scroll(function(){u.scrollLeft(s.scrollLeft());o.scrollLeft(s.scrollLeft())}),u.append(c),o.append(l),r.before(h),r.appendTo(s),h.append(u),h.append(s),h.append(o),d=r.height()+u.height()+o.height(),d>=v&&(u.width(u.width()-i),o.width(o.width()-i)),w=parseFloat(s.css("margin-top")),w-=u.height(),p=parseFloat(s.css("margin-bottom")),p-=o.height(),r.width()+i>=a&&(p-=i),s.css({overflow:"auto","margin-top":w+"px","margin-bottom":p+"px"}).width(a).height(v-i),f&&r.find("thead").hide(),t.reactive&&n(window).resize(function(){if(b!=y.width()){var n=y.width();if(t.width&&n>t.width)return;h.css({overflow:"hidden"}).width(n).height(v);u.css({overflow:"hidden",position:"relative"}).width(n-i);s.css({overflow:"auto","margin-top":w+"px","margin-bottom":p+"px"}).width(n).height(v-i);o.css({overflow:"hidden",position:"relative","background-color":e}).width(n-i);b=n}}))})}})(jQuery),function(n){var t=n('<div style="background:none;display:none;"/>').appendTo("body"),i=t.css("backgroundColor");t.remove();jQuery.fn.bkgcolor=function(t){function r(n){return n.css("backgroundColor")==i?n.is("body")?t||i:r(n.parent()):n.css("backgroundColor")}return r(n(this))}}(jQuery);$.fn.dataTable&&($.fn.dataTable.ext.errMode="throw");enableAntiXssAjaxPosts();